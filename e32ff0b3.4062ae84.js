(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{104:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return o})),r.d(t,"metadata",(function(){return l})),r.d(t,"rightToc",(function(){return d})),r.d(t,"default",(function(){return u}));var a=r(2),n=r(6),i=(r(0),r(118)),o={id:"adding_keyboard",title:"Adding a new Keyboard",slug:"/add"},l={unversionedId:"adding_keyboard",id:"adding_keyboard",isDocsHomePage:!1,title:"Adding a new Keyboard",description:"There are 4 files that either need to be edited or created for you to add your keyvoard",source:"@site/docs/adding_keyboard.md",slug:"/add",permalink:"/docs/add",editUrl:"https://github.com/jpconstantineau/BlueMicro_BLE/tree/documentation-docusaurus/documentation/docs/adding_keyboard.md",version:"current",sidebar:"someSidebar",previous:{title:"Installing Tools",permalink:"/docs/tools"},next:{title:"Understand GPIOs",permalink:"/docs/understand_gpios"}},d=[{value:"Prepare files and Folders",id:"prepare-files-and-folders",children:[]},{value:"Edit Keyboard Config",id:"edit-keyboard-config",children:[]},{value:"Edit Hardware Config",id:"edit-hardware-config",children:[]},{value:"Edit Keymap files (.cpp and .h)",id:"edit-keymap-files-cpp-and-h",children:[]},{value:"Compile",id:"compile",children:[]},{value:"Flash/Test",id:"flashtest",children:[]},{value:"Share",id:"share",children:[]}],c={rightToc:d};function u(e){var t=e.components,r=Object(n.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,r,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"There are 4 files that either need to be edited or created for you to add your keyvoard"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"keyboard_config.h: where the KEYMAP remapping macro is defined and where Bluetooth configuration is held."),Object(i.b)("li",{parentName:"ul"},"hardware_config.h: where your keyboard matrix is defined."),Object(i.b)("li",{parentName:"ul"},"keymap.cpp: main file you need to edit for your keymaps"),Object(i.b)("li",{parentName:"ul"},"keymap.h: include file where you can add your own definitions.")),Object(i.b)("p",null,'A copy of these 4 files is kept in the "firmware" folder.  This is the copy of the file that\'s compiled when you load the firmware in the Arduino IDE.  Build scripts overwrite these files from the keyboards folder structure.'),Object(i.b)("p",null,"You add a new keyboard to the BlueMicro_BLE repository using the following steps:"),Object(i.b)("h3",{id:"prepare-files-and-folders"},"Prepare files and Folders"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Create a new folder in the "keyboards" folder.  The folder name is the name of your board.'),Object(i.b)("li",{parentName:"ul"},'Create a sub-folder called "keymaps".'),Object(i.b)("li",{parentName:"ul"},'Create a sub-folder called "config".'),Object(i.b)("li",{parentName:"ul"},'Create a sub-folder called "hardware".'),Object(i.b)("li",{parentName:"ul"},'Create a sub-folder in "keymaps" called "default".  '),Object(i.b)("li",{parentName:"ul"},'Copy keymap.h in "default"'),Object(i.b)("li",{parentName:"ul"},'Create a sub-folder for each of your config layouts. Use "single" if a single keyboard is used.  Use "left" and "right" if two halves are needed. Note that these can be named anything you like, and you can use this folder name to differentiate between different versions of the same board.'),Object(i.b)("li",{parentName:"ul"},'Copy "keyboard_config.h" in each of the config folders.'),Object(i.b)("li",{parentName:"ul"},'Create a sub-folder in "hardware" for the fuly qualified board name (fqbn) you have. Options are "feather52832", "feather52840", "pca10056". '),Object(i.b)("li",{parentName:"ul"},'Create a sub-folder in the fqbn folder with your GPIO configuration name. Examples are "BlueMicro840", "NiceNano", "nrfmicro".'),Object(i.b)("li",{parentName:"ul"},"Copy hardware_config.h in the GPIO configuration folder (the one just created above). ")),Object(i.b)("h3",{id:"edit-keyboard-config"},"Edit Keyboard Config"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Edit "DEVICE_NAME_R","DEVICE_NAME_L","DEVICE_NAME_M".  Default name for a single keyboard is DEVICE_NAME_M. For split boards, the other two will be used.'),Object(i.b)("li",{parentName:"ul"},'Edit "DEVICE_MODEL", "MANUFACTURER_NAME"'),Object(i.b)("li",{parentName:"ul"},'Edit "KEYMAP". If there are multiple different keymaps; for example with reversible left/right boards, define multiple KEYMAP with the appropriate reversed mapping. You can also use this macro transform the matrix into any shaped keyboard you like. For example an 8x8 matrix can be remapped to a 4x16 keyboard.')),Object(i.b)("h3",{id:"edit-hardware-config"},"Edit Hardware Config"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Edit "MATRIX_ROWS" with the number of rows'),Object(i.b)("li",{parentName:"ul"},'Edit "MATRIX_COLS" with the number of columns'),Object(i.b)("li",{parentName:"ul"},'Edit "DIODE_DIRECTION" to either "COL2ROW" or \'ROW2COL"'),Object(i.b)("li",{parentName:"ul"},'Edit "MATRIX_ROW_PINS" to the GPIO numbers'),Object(i.b)("li",{parentName:"ul"},'Edit "MATRIX_COL_PINS" to the GPIO numbers')),Object(i.b)("h3",{id:"edit-keymap-files-cpp-and-h"},"Edit Keymap files (.cpp and .h)"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},'Create the necessary defines for "Layer IDs" in h file.'),Object(i.b)("li",{parentName:"ul"},"Create the KEYMAP for each layer."),Object(i.b)("li",{parentName:"ul"},"If there are multiple keyboard configs, make sure you have the appropriate #if statements to select the right/left keymap for the config.")),Object(i.b)("h3",{id:"compile"},"Compile"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Run the build scripts to test all config/map combinations."),Object(i.b)("li",{parentName:"ul"},"Fix whatever doesn't compile..."),Object(i.b)("li",{parentName:"ul"},"Find more details in the building firmware page.")),Object(i.b)("h3",{id:"flashtest"},"Flash/Test"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Flash to your board to test that everything works fine."),Object(i.b)("li",{parentName:"ul"},"Find details on how to flash the firmware on the flashing page.")),Object(i.b)("h3",{id:"share"},"Share"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Commit to GIT to share with everyone...")))}u.isMDXComponent=!0},118:function(e,t,r){"use strict";r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return f}));var a=r(0),n=r.n(a);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=n.a.createContext({}),u=function(e){var t=n.a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},b=function(e){var t=u(e.components);return n.a.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},p=n.a.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,c=d(e,["components","mdxType","originalType","parentName"]),b=u(r),p=a,f=b["".concat(o,".").concat(p)]||b[p]||s[p]||i;return r?n.a.createElement(f,l(l({ref:t},c),{},{components:r})):n.a.createElement(f,l({ref:t},c))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=p;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=r[c];return n.a.createElement.apply(null,o)}return n.a.createElement.apply(null,r)}p.displayName="MDXCreateElement"}}]);